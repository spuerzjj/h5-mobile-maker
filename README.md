# h5-mobile-maker

## [项目预览](http://120.77.169.147:8081/editor/)

http://120.77.169.147:8081/editor/

## 项目概要

该项目搭建了一个低代码平台的基础开发框架，解决了低代码平台的一些开发痛点问题

## 主要功能

1. 以微前端的方式（iframe）实现渲染引擎（preview）与编辑控件区（editor）的样式隔离
2. 以monorepo的方式组织代码仓，拆分出3个相对独立的工程（preview，editor，组件库），便于独立开发，同时保证代码风格统一
3. 使用postmessage实现preview与editor的通信
4. 提供网关功能（proxy-server）用于开发环境的项目启动

## 技术栈

1. Vue3
2. 微前端方案-iframe
3. express + http-proxy-middleware 开发网关

## 详细介绍

### 1. 为什么要进行样式隔离

低代码平台是一个相对很复杂的项目，一般来说

- 渲染引擎负责组件的渲染以及画布上的操作逻辑
- 编辑控件区主要负责整体页面的布局，样式和其他非组件相关的业务功能

很有可能这两块的开发是不同人/团结负责，无法保证编辑控件区的样式不侵入到渲染引擎，这将导致平台所产出页面的样式不稳定性

通过iframe将两个区域的会话分开，自然就不存在样式冲突问题了

### 2. 代码仓为什么要以monorepo的形式组织，保证了什么

- monorepo仓可以将项目拆分成多个子仓，各个团队只开发自己的子仓，避免代码冲突，便于独立开发
- 我将eslint，prettier，eslint配置文件，prettier配置文件，vue都放在了主仓中，可以保证不同团队的代码风格统一，vue版本一致

### 3. 为什么采用postmessage

- 浏览器原生支持，兼容性好，无需借助第三方库
- 允许跨域通讯

### 4. 为什么开发环境会额外提供一个网关

- 在开发环境中，preview和editor会运行在不同端口中，这会导致浏览器限制拖拽等交互事件的跨域，所以提供一个代理网关，避开浏览器的跨域限制
- 在生产环境中，如果无法部署到同源中，也需要一个代理网关，nginx可以做到

## 调试

1. 安装依赖运行项目

```bash
npm install
npm run dev
```

2. 访问 http://localhost:8080/editor/
